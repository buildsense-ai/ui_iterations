<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â∑•Á®ãAIÂä©Êâã - CanvasÊô∫ËÉΩÁâà</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* ÂéüÊúâ‰∏ªÈ¢òÂèòÈáè‰øùÊåÅ‰∏çÂèò */
        :root {
            --primary-color: #8b5cf6;
            --primary-hover: #7c3aed;
            --primary-light: #f3f4f6;
            --secondary-color: #a78bfa;
            --accent-color: #06b6d4;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --success-color: #10b981;
            
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #f5f5f5;
            --bg-hover: #f0f0f0;
            --bg-active: #e8f0fe;
            
            --text-primary: #333333;
            --text-secondary: #666666;
            --text-tertiary: #999999;
            --text-inverse: #ffffff;
            
            --border-color: #e0e0e0;
            --border-light: #f0f0f0;
            --border-focus: #1a73e8;
            
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.1);
            
            --gradient-primary: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
            --gradient-secondary: linear-gradient(135deg, #f3f4f6 0%, #faf5ff 100%);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .app-container {
            display: flex;
            height: 100vh;
            position: relative;
        }
        
        /* Â∑¶‰æßÂéüÊúâ‰æßËæπÊ†èÊ†∑Âºè‰øùÊåÅ‰∏çÂèò */
        .sidebar {
            width: 400px;
            min-width: 350px;
            background: var(--bg-primary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .sidebar.collapsed {
            width: 60px;
            min-width: 60px;
        }
        
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            position: relative;
        }
        
        .logo {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .project-name {
            font-size: 14px;
            color: var(--text-secondary);
            background: var(--bg-secondary);
            padding: 8px 12px;
            border-radius: 6px;
        }
        
        .settings-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 18px;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }
        
        .settings-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }
        
        .new-chat-btn {
            margin: 16px 20px;
            padding: 12px 16px;
            background: var(--gradient-primary);
            color: var(--text-inverse);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: var(--shadow-md);
        }
        
        .new-chat-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }
        
        .sidebar-tabs {
            display: flex;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }
        
        .sidebar-tab {
            flex: 1;
            padding: 12px 16px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 14px;
            color: var(--text-secondary);
            transition: all 0.2s;
            position: relative;
        }
        
        .sidebar-tab.active {
            color: var(--primary-color);
            background: var(--bg-primary);
            font-weight: 500;
        }
        
        .sidebar-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary-color);
        }
        
        .tab-content {
            display: none;
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .tab-content.active {
            display: flex;
            flex-direction: column;
        }
        
        /* Êô∫ËÉΩÊñá‰ª∂Êé®Ëçê */
        .smart-suggestions {
            background: linear-gradient(135deg, #e8f0fe 0%, #f3e5f5 100%);
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 16px;
        }
        
        .suggestion-title {
            font-size: 13px;
            font-weight: 500;
            color: var(--primary-color);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .suggestion-item {
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: 6px;
            padding: 8px 12px;
            margin-bottom: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .suggestion-item:hover {
            background: var(--bg-active);
            border-color: var(--primary-color);
        }
        
        .suggestion-reason {
            font-size: 10px;
            color: var(--text-tertiary);
            margin-left: auto;
        }
        
        /* Êñá‰ª∂È°πÊ†∑ÂºèÂ¢ûÂº∫ */
        .folder {
            margin-bottom: 12px;
        }
        
        .folder-title {
            font-weight: 500;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 6px;
            transition: background 0.2s;
        }
        
        .folder-title:hover {
            background: var(--bg-hover);
        }
        
        .folder-icon {
            margin-right: 8px;
            font-size: 16px;
        }
        
        .file-list {
            margin-left: 24px;
            margin-top: 8px;
        }
        
        .file-item {
            padding: 10px 12px;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1px solid transparent;
            position: relative;
            margin-bottom: 4px;
        }
        
        .file-item:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
            border-color: var(--border-color);
            transform: translateX(4px);
        }
        
        .file-item.ai-recommended {
            background: linear-gradient(135deg, #fff3cd 0%, #f8f9fa 100%);
            border-color: var(--warning-color);
        }
        
        .file-item.ai-recommended::before {
            content: 'ü§ñ';
            position: absolute;
            left: -12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 12px;
        }
        
        .file-item.canvas-file {
            border-left: 3px solid var(--success-color);
            background: linear-gradient(135deg, #d1fae5 0%, #f0fdf4 100%);
            color: var(--text-primary);
        }
        
        .file-actions {
            display: flex;
            gap: 4px;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .file-item:hover .file-actions {
            opacity: 1;
        }
        
        .file-action-btn {
            padding: 2px 8px;
            background: var(--primary-color);
            color: var(--text-inverse);
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 10px;
            transition: all 0.2s;
        }
        
        .file-action-btn:hover {
            background: var(--primary-hover);
        }
        
        .file-action-btn.ai {
            background: var(--warning-color);
        }
        
        /* AIÂçè‰ΩúÁä∂ÊÄÅÊåáÁ§∫Âô® */
        .ai-status-indicator {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 8px 12px;
            margin: 12px 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: var(--text-secondary);
            border: 1px solid var(--border-light);
        }
        
        .ai-status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success-color);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .input-area {
            padding: 20px;
            border-top: 1px solid var(--border-color);
            background: var(--bg-primary);
        }
        
        /* Êô∫ËÉΩËæìÂÖ•Âª∫ËÆÆ */
        .input-suggestions {
            display: none;
            margin-bottom: 12px;
        }
        
        .input-suggestions.show {
            display: block;
        }
        
        .suggestion-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        
        .suggestion-chip {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 4px 8px;
            font-size: 11px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .suggestion-chip:hover {
            background: var(--bg-active);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .input-container {
            display: flex;
            gap: 12px;
            align-items: end;
            position: relative;
        }
        
        .input-field {
            flex: 1;
            min-height: 40px;
            max-height: 120px;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            resize: none;
            font-family: inherit;
            font-size: 14px;
            outline: none;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.2s ease;
        }
        
        .input-field:focus {
            border-color: var(--border-focus);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }
        
        .input-field.ai-thinking {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, #fff3cd 0%, #ffffff 100%);
        }
        
        .input-actions {
            display: flex;
            gap: 8px;
        }
        
        .attach-btn {
            width: 40px;
            height: 40px;
            border: 1px solid var(--border-color);
            border-radius: 50%;
            background: var(--bg-primary);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .attach-btn:hover {
            border-color: var(--border-focus);
            background: var(--bg-active);
            color: var(--text-primary);
        }
        
        .send-button {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            background: var(--primary-color);
            color: var(--text-inverse);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            position: relative;
        }
        
        .send-button:hover {
            background: var(--primary-hover);
            transform: scale(1.05);
        }
        
        .send-button.ai-processing {
            background: var(--warning-color);
            animation: rotate 1s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Âè≥‰æßCanvasÂå∫Âüü */
        .canvas-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-secondary);
            position: relative;
        }
        
        .canvas-header {
            height: 60px;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 20px;
            justify-content: space-between;
        }
        
        .canvas-title {
            font-size: 18px;
            font-weight: 500;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .canvas-status {
            font-size: 12px;
            color: var(--text-secondary);
            background: var(--bg-secondary);
            padding: 4px 8px;
            border-radius: 12px;
            position: relative;
        }
        
        .canvas-status.ai-active {
            background: linear-gradient(135deg, #fff3cd 0%, #fef3c7 100%);
            color: var(--warning-color);
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(245, 158, 11, 0.3); }
            50% { box-shadow: 0 0 15px rgba(245, 158, 11, 0.5); }
        }
        
        .canvas-actions {
            display: flex;
            gap: 8px;
        }
        
        .canvas-btn {
            padding: 8px 12px;
            background: none;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .canvas-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }
        
        .canvas-btn.primary {
            background: var(--gradient-primary);
            color: var(--text-inverse);
            border: none;
        }
        
        .canvas-btn.ai-suggested {
            border-color: var(--warning-color);
            color: var(--warning-color);
            animation: suggest-pulse 3s infinite;
        }
        
        @keyframes suggest-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .canvas-content {
            flex: 1;
            overflow: hidden;
            position: relative;
        }
        
        /* AIÂÆûÊó∂Âçè‰ΩúË¶ÜÁõñÂ±Ç */
        .ai-collaboration-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(2px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .ai-collaboration-overlay.show {
            display: flex;
        }
        
        .ai-collaboration-card {
            background: var(--bg-primary);
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-lg);
            text-align: center;
            max-width: 400px;
            border: 2px solid var(--primary-color);
        }
        
        .ai-avatar {
            width: 60px;
            height: 60px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin: 0 auto 16px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .ai-message {
            font-size: 16px;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .ai-action {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }
        
        .ai-progress {
            height: 4px;
            background: var(--bg-secondary);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .ai-progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 2px;
        }
        
        /* CanvasÂ∑•‰ΩúÂå∫Ê†∑Âºè */
        .canvas-workspace {
            width: 100%;
            height: 100%;
            position: absolute;
            display: none;
        }
        
        .canvas-workspace.active {
            display: flex;
            flex-direction: column;
        }
        
        /* Êô∫ËÉΩÊ¨¢ËøéÂ±èÂπï */
        .canvas-welcome {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            background: var(--bg-primary);
            position: relative;
        }
        
        .welcome-icon {
            font-size: 64px;
            margin-bottom: 20px;
            color: var(--primary-color);
        }
        
        .welcome-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }
        
        .welcome-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 32px;
            line-height: 1.5;
        }
        
        .smart-recommendations {
            max-width: 600px;
            width: 100%;
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
        }
        
        .recommendations-title {
            font-size: 16px;
            font-weight: 500;
            color: var(--primary-color);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .recommendation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }
        
        .recommendation-item {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .recommendation-item:hover {
            background: var(--bg-active);
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .recommendation-icon {
            font-size: 20px;
            margin-bottom: 8px;
        }
        
        .recommendation-title {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }
        
        .recommendation-desc {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .welcome-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .welcome-action {
            padding: 12px 20px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--text-primary);
        }
        
        .welcome-action:hover {
            background: var(--bg-active);
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }
        
        /* Â¢ûÂº∫ÁöÑPDFÊü•ÁúãÂô® */
        .pdf-viewer {
            background: #f5f5f5;
            display: flex;
            flex-direction: column;
        }
        
        .pdf-toolbar {
            height: 50px;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 20px;
            gap: 16px;
        }
        
        .pdf-nav {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .pdf-btn {
            padding: 6px 12px;
            background: none;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }
        
        .pdf-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }
        
        .ai-analysis-btn {
            background: var(--gradient-primary);
            color: var(--text-inverse);
            border: none;
            margin-left: auto;
        }
        
        .pdf-content {
            flex: 1;
            overflow: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
        }
        
        .pdf-page {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            min-height: 600px;
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px;
            position: relative;
        }
        
        .ai-annotations {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            box-shadow: var(--shadow-md);
            max-width: 200px;
            display: none;
        }
        
        .ai-annotations.show {
            display: block;
        }
        
        .annotation-title {
            font-size: 12px;
            font-weight: 500;
            color: var(--primary-color);
            margin-bottom: 8px;
        }
        
        .annotation-item {
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 4px;
            padding: 4px;
            background: var(--bg-secondary);
            border-radius: 4px;
        }
        
        /* Â¢ûÂº∫ÁöÑÊñáÊ°£ÁºñËæëÂô® */
        .document-editor {
            background: white;
            display: flex;
            flex-direction: column;
        }
        
        .editor-toolbar {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }
        
        .toolbar-group {
            display: flex;
            gap: 4px;
            align-items: center;
            border-right: 1px solid var(--border-color);
            padding-right: 16px;
        }
        
        .toolbar-group:last-child {
            border-right: none;
            padding-right: 0;
        }
        
        .toolbar-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: none;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .toolbar-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }
        
        .toolbar-btn.active {
            background: var(--primary-color);
            color: var(--text-inverse);
        }
        
        .ai-toolbar-group {
            background: linear-gradient(135deg, #fff3cd 0%, #fef3c7 100%);
            border-radius: 6px;
            padding: 4px;
            border: 1px solid var(--warning-color);
        }
        
        .ai-suggest-btn {
            background: var(--warning-color);
            color: var(--text-inverse);
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .ai-suggest-btn:hover {
            background: #d97706;
        }
        
        .editor-content {
            flex: 1;
            overflow-y: auto;
            background: white;
            position: relative;
        }
        
        .editor-area {
            min-height: 100%;
            padding: 40px 60px;
            outline: none;
            font-size: 16px;
            line-height: 1.6;
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .editor-area h1, .editor-area h2, .editor-area h3 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
        }
        
        .editor-area h1 {
            font-size: 28px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 8px;
        }
        
        .editor-area h2 {
            font-size: 22px;
        }
        
        .editor-area h3 {
            font-size: 18px;
        }
        
        .editor-area p {
            margin-bottom: 16px;
        }
        
        .editor-area ul, .editor-area ol {
            margin-bottom: 16px;
            padding-left: 24px;
        }
        
        .editor-area li {
            margin-bottom: 4px;
        }
        
        .ai-suggestion-bubble {
            position: absolute;
            background: var(--bg-primary);
            border: 2px solid var(--warning-color);
            border-radius: 12px;
            padding: 12px;
            box-shadow: var(--shadow-lg);
            max-width: 300px;
            z-index: 1000;
            display: none;
        }
        
        .ai-suggestion-bubble.show {
            display: block;
        }
        
        .suggestion-text {
            font-size: 13px;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .suggestion-actions {
            display: flex;
            gap: 6px;
        }
        
        .suggestion-btn {
            padding: 4px 8px;
            border: none;
            border-radius: 4px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .suggestion-btn.accept {
            background: var(--success-color);
            color: var(--text-inverse);
        }
        
        .suggestion-btn.reject {
            background: var(--border-color);
            color: var(--text-secondary);
        }
        
        /* ‰æßËæπÊ†èÊî∂Áº©Êó∂ÁöÑÊ†∑Âºè */
        .sidebar.collapsed .logo,
        .sidebar.collapsed .project-name,
        .sidebar.collapsed .new-chat-btn span:last-child,
        .sidebar.collapsed .sidebar-tab,
        .sidebar.collapsed .tab-content,
        .sidebar.collapsed .ai-status-indicator {
            display: none;
        }
        
        .sidebar.collapsed .new-chat-btn {
            margin: 16px 8px;
            padding: 12px;
            justify-content: center;
        }
        
        .sidebar.collapsed .settings-btn {
            position: static;
            margin: 8px auto;
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: absolute;
                z-index: 1000;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .canvas-section {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Â∑¶‰æß‰æßËæπÊ†è - ‰øùÊåÅÂéüÊúâÂäüËÉΩ -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">üèóÔ∏è Â∑•Á®ãAIÂä©Êâã</div>
                <div class="project-name">üìÅ ÊüêÂ∏ÇÊîøÂ∑•Á®ãÈ°πÁõÆ</div>
                <button class="settings-btn" onclick="openSettings()">‚öôÔ∏è</button>
            </div>
            
            <button class="new-chat-btn" onclick="startNewChat()">
                <span>üí¨</span>
                <span>Êñ∞Âª∫ÂØπËØù</span>
            </button>
            
            <div class="ai-status-indicator">
                <div class="ai-status-dot"></div>
                <span>AIÊô∫ËÉΩÂä©ÊâãÂú®Á∫ø</span>
            </div>
            
            <div class="sidebar-tabs">
                <button class="sidebar-tab active" onclick="switchTab('files')">
                    <span>üìÅ Êñá‰ª∂</span>
                </button>
                <button class="sidebar-tab" onclick="switchTab('history')">
                    <span>üí¨ ÂØπËØù</span>
                </button>
            </div>
            
            <div class="tab-content active" id="filesTab">
                <!-- AIÊô∫ËÉΩÊé®Ëçê -->
                <div class="smart-suggestions" id="smartSuggestions">
                    <div class="suggestion-title">
                        <span>ü§ñ</span>
                        <span>AIÊô∫ËÉΩÊé®Ëçê</span>
                    </div>
                    <div class="suggestion-item" onclick="openInCanvas('pdf', 'Âª∫Á≠ëÂπ≥Èù¢Âõæ.pdf')">
                        <span>üìÑ</span>
                        <span>Âª∫Á≠ëÂπ≥Èù¢Âõæ.pdf</span>
                        <span class="suggestion-reason">Áõ∏ÂÖ≥ÊÄßÈ´ò</span>
                    </div>
                    <div class="suggestion-item" onclick="openInCanvas('editor', 'ÊñΩÂ∑•ÊñπÊ°à.docx')">
                        <span>üìù</span>
                        <span>ÊñΩÂ∑•ÊñπÊ°à.docx</span>
                        <span class="suggestion-reason">ÂæÖÂÆåÂñÑ</span>
                    </div>
                </div>
                
                <div class="folder">
                    <div class="folder-title">
                        <span class="folder-icon">üìÅ</span>
                        ÊñΩÂ∑•ÂõæÁ∫∏
                    </div>
                    <div class="file-list">
                        <div class="file-item ai-recommended" onclick="openInCanvas('pdf', 'Âª∫Á≠ëÂπ≥Èù¢Âõæ.pdf')">
                            üìÑ Âª∫Á≠ëÂπ≥Èù¢Âõæ.pdf
                            <div class="file-actions">
                                <button class="file-action-btn">ÊâìÂºÄ</button>
                                <button class="file-action-btn ai">AIÂàÜÊûê</button>
                            </div>
                        </div>
                        <div class="file-item" onclick="openInCanvas('pdf', 'ÁªìÊûÑÊñΩÂ∑•Âõæ.pdf')">
                            üìÑ ÁªìÊûÑÊñΩÂ∑•Âõæ.pdf
                            <div class="file-actions">
                                <button class="file-action-btn">ÊâìÂºÄ</button>
                                <button class="file-action-btn ai">AIÂàÜÊûê</button>
                            </div>
                        </div>
                        <div class="file-item" onclick="openInCanvas('pdf', 'ÁîµÊ∞îÁ≥ªÁªüÂõæ.pdf')">
                            üìÑ ÁîµÊ∞îÁ≥ªÁªüÂõæ.pdf
                            <div class="file-actions">
                                <button class="file-action-btn">ÊâìÂºÄ</button>
                                <button class="file-action-btn ai">AIÂàÜÊûê</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="folder">
                    <div class="folder-title">
                        <span class="folder-icon">üìÅ</span>
                        ÁîüÊàêÊñáÊ°£
                    </div>
                    <div class="file-list">
                        <div class="file-item ai-recommended" onclick="openInCanvas('editor', 'ÊñΩÂ∑•ÊñπÊ°à.docx')">
                            üìÑ ÊñΩÂ∑•ÊñπÊ°à.docx
                            <div class="file-actions">
                                <button class="file-action-btn">ÁºñËæë</button>
                                <button class="file-action-btn ai">AIÂÆåÂñÑ</button>
                            </div>
                        </div>
                        <div class="file-item" onclick="openInCanvas('editor', 'Ë¥®ÈáèÊ£ÄÊü•Êä•Âëä.docx')">
                            üìÑ Ë¥®ÈáèÊ£ÄÊü•Êä•Âëä.docx
                            <div class="file-actions">
                                <button class="file-action-btn">ÁºñËæë</button>
                                <button class="file-action-btn ai">AIÂÆåÂñÑ</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="folder">
                    <div class="folder-title" onclick="createNewDocument()">
                        <span class="folder-icon">‚ûï</span>
                        Êñ∞Âª∫ÊñáÊ°£
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="historyTab">
                <div style="color: var(--text-secondary); text-align: center; padding: 40px 20px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">üí¨</div>
                    <div style="font-size: 16px; margin-bottom: 8px;">ÂØπËØùÂéÜÂè≤</div>
                    <div style="font-size: 14px;">ÁÇπÂáª"Êñ∞Âª∫ÂØπËØù"ÂºÄÂßã</div>
                </div>
            </div>
            
            <div class="input-area">
                <!-- Êô∫ËÉΩËæìÂÖ•Âª∫ËÆÆ -->
                <div class="input-suggestions" id="inputSuggestions">
                    <div class="suggestion-chips">
                        <div class="suggestion-chip" onclick="useInputSuggestion('ÂàÜÊûêÂΩìÂâçÂõæÁ∫∏ÁöÑÁªìÊûÑË¶ÅÁÇπ')">ÂàÜÊûêÂõæÁ∫∏ÁªìÊûÑ</div>
                        <div class="suggestion-chip" onclick="useInputSuggestion('Â∏ÆÊàëÂÆåÂñÑÊñΩÂ∑•ÊñπÊ°à')">ÂÆåÂñÑÊñπÊ°à</div>
                        <div class="suggestion-chip" onclick="useInputSuggestion('ÁîüÊàêË¥®ÈáèÊ£ÄÊü•Ê∏ÖÂçï')">Ë¥®ÈáèÊ£ÄÊü•</div>
                    </div>
                </div>
                
                <div class="input-container">
                    <textarea class="input-field" id="inputField" placeholder="Êô∫ËÉΩAIÂä©ÊâãÁ≠âÂæÖÊÇ®ÁöÑÊåá‰ª§..." rows="1"></textarea>
                    <div class="input-actions">
                        <button class="attach-btn" id="attachBtn" title="‰∏ä‰º†Êñá‰ª∂">üìé</button>
                        <button class="send-button" id="sendButton">
                            <span>‚ñ∂</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Âè≥‰æßCanvasÂå∫Âüü -->
        <div class="canvas-section">
            <div class="canvas-header">
                <div class="canvas-title">
                    <span id="canvasIcon">ü§ñ</span>
                    <span id="canvasTitleText">AIÂçè‰ΩúÁîªÂ∏É</span>
                    <span class="canvas-status" id="canvasStatus">Â∞±Áª™</span>
                </div>
                <div class="canvas-actions">
                    <button class="canvas-btn ai-suggested" onclick="showAIRecommendations()">
                        <span>ü§ñ</span>
                        <span>AIÂª∫ËÆÆ</span>
                    </button>
                    <button class="canvas-btn" onclick="toggleSidebar()">
                        <span>üìÅ</span>
                        <span>Êñá‰ª∂</span>
                    </button>
                    <button class="canvas-btn" onclick="clearCanvas()">
                        <span>üóëÔ∏è</span>
                        <span>Ê∏ÖÁ©∫</span>
                    </button>
                    <button class="canvas-btn primary" onclick="saveCanvas()">
                        <span>üíæ</span>
                        <span>‰øùÂ≠ò</span>
                    </button>
                </div>
            </div>
            
            <div class="canvas-content">
                <!-- AIÂÆûÊó∂Âçè‰ΩúË¶ÜÁõñÂ±Ç -->
                <div class="ai-collaboration-overlay" id="aiCollaborationOverlay">
                    <div class="ai-collaboration-card">
                        <div class="ai-avatar">ü§ñ</div>
                        <div class="ai-message" id="aiMessage">AIÊ≠£Âú®ÂàÜÊûêÊÇ®ÁöÑËØ∑Ê±Ç...</div>
                        <div class="ai-action" id="aiAction">ÂáÜÂ§áCanvasÊìç‰Ωú</div>
                        <div class="ai-progress">
                            <div class="ai-progress-bar" id="aiProgressBar"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Êô∫ËÉΩÊ¨¢ËøéÂ±èÂπï -->
                <div class="canvas-workspace active" id="welcomeWorkspace">
                    <div class="canvas-welcome">
                        <div class="welcome-icon">ü§ñ</div>
                        <div class="welcome-title">AIÊô∫ËÉΩÂçè‰ΩúÁîªÂ∏É</div>
                        <div class="welcome-subtitle">
                            AIÂä©Êâã‰ºöÊ†πÊçÆÊÇ®ÁöÑÂØπËØùÊô∫ËÉΩÊìç‰ΩúÁîªÂ∏É<br>
                            ÂÆûÊó∂Âçè‰ΩúÔºåËÆ©Â∑•‰ΩúÊõ¥È´òÊïà
                        </div>
                        
                        <div class="smart-recommendations">
                            <div class="recommendations-title">
                                <span>üéØ</span>
                                <span>Âü∫‰∫éÈ°πÁõÆÁöÑÊô∫ËÉΩÊé®Ëçê</span>
                            </div>
                            <div class="recommendation-grid">
                                <div class="recommendation-item" onclick="startSmartWorkflow('analyze-drawings')">
                                    <div class="recommendation-icon">üìä</div>
                                    <div class="recommendation-title">ÂõæÁ∫∏ÂàÜÊûê</div>
                                    <div class="recommendation-desc">AIÂàÜÊûêÂª∫Á≠ëÂõæÁ∫∏ÂÖ≥ÈîÆ‰ø°ÊÅØ</div>
                                </div>
                                <div class="recommendation-item" onclick="startSmartWorkflow('generate-plan')">
                                    <div class="recommendation-icon">üìù</div>
                                    <div class="recommendation-title">ÊñπÊ°àÁîüÊàê</div>
                                    <div class="recommendation-desc">Âü∫‰∫éÈ°πÁõÆÁîüÊàêÊñΩÂ∑•ÊñπÊ°à</div>
                                </div>
                                <div class="recommendation-item" onclick="startSmartWorkflow('quality-check')">
                                    <div class="recommendation-icon">‚úÖ</div>
                                    <div class="recommendation-title">Ë¥®ÈáèÊ£ÄÊü•</div>
                                    <div class="recommendation-desc">ÂàõÂª∫Ë¥®ÈáèÊ£ÄÊü•Ê∏ÖÂçï</div>
                                </div>
                                <div class="recommendation-item" onclick="startSmartWorkflow('risk-assessment')">
                                    <div class="recommendation-icon">‚ö†Ô∏è</div>
                                    <div class="recommendation-title">È£éÈô©ËØÑ‰º∞</div>
                                    <div class="recommendation-desc">È°πÁõÆÈ£éÈô©ÂàÜÊûêÊä•Âëä</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="welcome-actions">
                            <div class="welcome-action" onclick="openInCanvas('pdf', 'Âª∫Á≠ëÂπ≥Èù¢Âõæ.pdf')">
                                <span>üìÑ</span>
                                <span>Êü•ÁúãÂõæÁ∫∏</span>
                            </div>
                            <div class="welcome-action" onclick="createNewDocument()">
                                <span>üìù</span>
                                <span>Êñ∞Âª∫ÊñáÊ°£</span>
                            </div>
                            <div class="welcome-action" onclick="startAICollaboration()">
                                <span>ü§ñ</span>
                                <span>AIÂçè‰Ωú</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Â¢ûÂº∫ÁöÑPDFÊü•ÁúãÂô®Â∑•‰ΩúÂå∫ -->
                <div class="canvas-workspace" id="pdfWorkspace">
                    <div class="pdf-viewer">
                        <div class="pdf-toolbar">
                            <div class="pdf-nav">
                                <button class="pdf-btn" onclick="previousPage()">‚óÄ ‰∏ä‰∏ÄÈ°µ</button>
                                <span>Á¨¨ <span id="currentPage">1</span> È°µÔºåÂÖ± <span id="totalPages">10</span> È°µ</span>
                                <button class="pdf-btn" onclick="nextPage()">‰∏ã‰∏ÄÈ°µ ‚ñ∂</button>
                            </div>
                            <div class="pdf-nav">
                                <button class="pdf-btn" onclick="zoomOut()">üîç-</button>
                                <button class="pdf-btn" onclick="zoomIn()">üîç+</button>
                                <button class="pdf-btn" onclick="fitToWidth()">üìê ÈÄÇÂêàÂÆΩÂ∫¶</button>
                            </div>
                            <button class="pdf-btn ai-analysis-btn" onclick="startAIPDFAnalysis()">ü§ñ AIÂàÜÊûê</button>
                        </div>
                        <div class="pdf-content">
                            <div class="pdf-page" id="pdfPage">
                                <div style="font-size: 48px; margin-bottom: 16px; color: var(--primary-color);">üìÑ</div>
                                <div style="font-size: 18px; margin-bottom: 8px;" id="pdfFileName">PDFÊñáÊ°£</div>
                                <div style="font-size: 14px; color: var(--text-secondary);">ÊñáÊ°£ÂÜÖÂÆπÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫</div>
                            </div>
                            
                            <!-- AIÊ≥®ÈáäÈù¢Êùø -->
                            <div class="ai-annotations" id="aiAnnotations">
                                <div class="annotation-title">ü§ñ AIÂàÜÊûê</div>
                                <div class="annotation-item">ÂèëÁé∞3‰∏™ÁªìÊûÑË¶ÅÁÇπ</div>
                                <div class="annotation-item">ÊùêÊñôËßÑÊ†ºÂ∑≤Ê†áÊ≥®</div>
                                <div class="annotation-item">Â∞∫ÂØ∏‰ø°ÊÅØÂÆåÊï¥</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Â¢ûÂº∫ÁöÑÊñáÊ°£ÁºñËæëÂô®Â∑•‰ΩúÂå∫ -->
                <div class="canvas-workspace" id="editorWorkspace">
                    <div class="document-editor">
                        <div class="editor-toolbar">
                            <div class="toolbar-group">
                                <button class="toolbar-btn" onclick="formatText('bold')" title="Á≤ó‰Ωì"><b>B</b></button>
                                <button class="toolbar-btn" onclick="formatText('italic')" title="Êñú‰Ωì"><i>I</i></button>
                                <button class="toolbar-btn" onclick="formatText('underline')" title="‰∏ãÂàíÁ∫ø"><u>U</u></button>
                            </div>
                            <div class="toolbar-group">
                                <button class="toolbar-btn" onclick="formatText('insertUnorderedList')" title="È°πÁõÆÁ¨¶Âè∑">‚Ä¢ </button>
                                <button class="toolbar-btn" onclick="formatText('insertOrderedList')" title="ÁºñÂè∑">1.</button>
                            </div>
                            <div class="toolbar-group">
                                <button class="toolbar-btn" onclick="formatText('justifyLeft')" title="Â∑¶ÂØπÈΩê">‚¨Ö</button>
                                <button class="toolbar-btn" onclick="formatText('justifyCenter')" title="Â±Ö‰∏≠">‚Üî</button>
                                <button class="toolbar-btn" onclick="formatText('justifyRight')" title="Âè≥ÂØπÈΩê">‚û°</button>
                            </div>
                            <div class="toolbar-group ai-toolbar-group">
                                <button class="ai-suggest-btn" onclick="showAISuggestions()">ü§ñ AIÂª∫ËÆÆ</button>
                                <button class="ai-suggest-btn" onclick="askAIForHelp()">üí° AIÂçèÂä©</button>
                            </div>
                        </div>
                        
                        <div class="editor-content">
                            <div class="editor-area" contenteditable="true" id="editorArea">
                                <h1>Ê¨¢Ëøé‰ΩøÁî®AIÊô∫ËÉΩÂçè‰ΩúÁºñËæëÂô®</h1>
                                <p>Âú®ËøôÈáåÔºåAI‰∏ç‰ªÖÊòØÂä©ÊâãÔºåÊõ¥ÊòØÊÇ®ÁöÑÂçè‰Ωú‰ºô‰º¥Ôºö</p>
                                <ul>
                                    <li>üí° AI‰ºöÂÆûÊó∂ÂàÜÊûêÊÇ®ÁöÑÂÜÖÂÆπÂπ∂Êèê‰æõÊîπËøõÂª∫ËÆÆ</li>
                                    <li>üéØ Âü∫‰∫éÈ°πÁõÆËÉåÊôØÊô∫ËÉΩÊé®ËçêÁõ∏ÂÖ≥ÂÜÖÂÆπ</li>
                                    <li>‚ö° ‰∏éAIÂØπËØùÂç≥ÂèØÁõ¥Êé•ÁºñËæëÊñáÊ°£</li>
                                    <li>üîÑ AIÂèØ‰ª•ÂÆûÊó∂ÂÆåÂñÑÂíå‰ºòÂåñÊÇ®ÁöÑÂ∑•‰Ωú</li>
                                </ul>
                                <p>ËØïËØïÂú®Â∑¶‰æßÂØπËØùÊ°Ü‰∏≠ËØ¥Ôºö"Â∏ÆÊàëÂÆåÂñÑËøô‰∏™ÊñáÊ°£ÁöÑÁªìÊûÑ"</p>
                            </div>
                            
                            <!-- AIÂª∫ËÆÆÊ∞îÊ≥° -->
                            <div class="ai-suggestion-bubble" id="aiSuggestionBubble">
                                <div class="suggestion-text">Âª∫ËÆÆÊ∑ªÂä†ÂÆâÂÖ®Ê≥®ÊÑè‰∫ãÈ°πÈÉ®ÂàÜÔºåÊèêÈ´òÊñáÊ°£ÂÆåÊï¥ÊÄß</div>
                                <div class="suggestion-actions">
                                    <button class="suggestion-btn accept" onclick="acceptAISuggestion()">ÈááÁ∫≥</button>
                                    <button class="suggestion-btn reject" onclick="rejectAISuggestion()">ÂøΩÁï•</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentWorkspace = 'welcome';
        let currentFile = null;
        let aiActive = false;
        let suggestionsEnabled = true;
        
        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            initializeSmartFeatures();
            showInputSuggestions();
            
            // Ê®°ÊãüAIÊô∫ËÉΩÊé®Ëçê
            setTimeout(() => {
                updateSmartSuggestions();
            }, 3000);
        });
        
        // ÂàùÂßãÂåñÊô∫ËÉΩÂäüËÉΩ
        function initializeSmartFeatures() {
            // Ê®°ÊãüAIÂàÜÊûêÁî®Êà∑Ë°å‰∏∫
            setInterval(() => {
                if (Math.random() > 0.7 && currentWorkspace === 'editor') {
                    showRandomAISuggestion();
                }
            }, 30000); // ÊØè30ÁßíÂèØËÉΩÊòæÁ§∫AIÂª∫ËÆÆ
            
            // Êô∫ËÉΩËæìÂÖ•ÁõëÂê¨
            const inputField = document.getElementById('inputField');
            inputField.addEventListener('input', handleSmartInput);
        }
        
        // ÂàáÊç¢Ê†áÁ≠æÈ°µ
        function switchTab(tabName) {
            document.querySelectorAll('.sidebar-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            if (tabName === 'files') {
                document.getElementById('filesTab').classList.add('active');
            } else if (tabName === 'history') {
                document.getElementById('historyTab').classList.add('active');
            }
        }
        
        // Êô∫ËÉΩËæìÂÖ•Â§ÑÁêÜ
        function handleSmartInput(e) {
            const value = e.target.value.toLowerCase();
            
            // Ê†πÊçÆËæìÂÖ•ÂÜÖÂÆπÊòæÁ§∫‰∏çÂêåÁöÑÂª∫ËÆÆ
            if (value.includes('ÂõæÁ∫∏') || value.includes('ÂàÜÊûê')) {
                showSmartInputSuggestions(['ÂàÜÊûêÂª∫Á≠ëÂπ≥Èù¢ÂõæÁöÑÂÖ≥ÈîÆ‰ø°ÊÅØ', 'Ê£ÄÊü•ÂõæÁ∫∏‰∏≠ÁöÑÁªìÊûÑË¶ÅÁÇπ', 'ÊèêÂèñÂõæÁ∫∏Â∞∫ÂØ∏Êï∞ÊçÆ']);
            } else if (value.includes('ÊñáÊ°£') || value.includes('ÁîüÊàê')) {
                showSmartInputSuggestions(['ÁîüÊàêÊñΩÂ∑•ÊñπÊ°àÂ§ßÁ∫≤', 'ÂàõÂª∫Ë¥®ÈáèÊ£ÄÊü•Ê∏ÖÂçï', 'ÁºñÂÜôÂÆâÂÖ®ÁÆ°ÁêÜÂà∂Â∫¶']);
            } else if (value.includes('ÂÆåÂñÑ') || value.includes('‰ºòÂåñ')) {
                showSmartInputSuggestions(['ÂÆåÂñÑÂΩìÂâçÊñáÊ°£ÁªìÊûÑ', '‰ºòÂåñÂÜÖÂÆπË°®Ëææ', 'Ê∑ªÂä†‰∏ì‰∏öÊúØËØ≠ËØ¥Êòé']);
            } else if (value.length === 0) {
                showInputSuggestions();
            }
        }
        
        // ÊòæÁ§∫Êô∫ËÉΩËæìÂÖ•Âª∫ËÆÆ
        function showSmartInputSuggestions(suggestions) {
            const container = document.getElementById('inputSuggestions');
            const chipsContainer = container.querySelector('.suggestion-chips');
            
            chipsContainer.innerHTML = suggestions.map(suggestion => 
                `<div class="suggestion-chip" onclick="useInputSuggestion('${suggestion}')">${suggestion}</div>`
            ).join('');
            
            container.classList.add('show');
        }
        
        // ÊòæÁ§∫ÈªòËÆ§ËæìÂÖ•Âª∫ËÆÆ
        function showInputSuggestions() {
            const container = document.getElementById('inputSuggestions');
            container.classList.add('show');
        }
        
        // ‰ΩøÁî®ËæìÂÖ•Âª∫ËÆÆ
        function useInputSuggestion(suggestion) {
            document.getElementById('inputField').value = suggestion;
            document.getElementById('inputSuggestions').classList.remove('show');
            document.getElementById('inputField').focus();
        }
        
        // Êõ¥Êñ∞Êô∫ËÉΩÊé®Ëçê
        function updateSmartSuggestions() {
            const suggestions = [
                { file: 'Âª∫Á≠ëÂπ≥Èù¢Âõæ.pdf', type: 'pdf', reason: 'ÊúÄËøë‰øÆÊîπ' },
                { file: 'ÊñΩÂ∑•ÊñπÊ°à.docx', type: 'editor', reason: 'ÂæÖÂÆåÂñÑ' },
                { file: 'Ë¥®ÈáèÊ£ÄÊü•Êä•Âëä.docx', type: 'editor', reason: 'Áõ∏ÂÖ≥ÊÄßÈ´ò' }
            ];
            
            const container = document.getElementById('smartSuggestions');
            const existingItems = container.querySelectorAll('.suggestion-item');
            
            // ÈöèÊú∫Êõ¥Êñ∞‰∏Ä‰∏™Êé®ËçêÈ°π
            if (existingItems.length > 0) {
                const randomIndex = Math.floor(Math.random() * existingItems.length);
                const newSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
                
                existingItems[randomIndex].innerHTML = `
                    <span>${newSuggestion.type === 'pdf' ? 'üìÑ' : 'üìù'}</span>
                    <span>${newSuggestion.file}</span>
                    <span class="suggestion-reason">${newSuggestion.reason}</span>
                `;
                existingItems[randomIndex].onclick = () => openInCanvas(newSuggestion.type, newSuggestion.file);
            }
        }
        
        // Âú®Canvas‰∏≠ÊâìÂºÄÊñá‰ª∂
        function openInCanvas(type, filename) {
            currentFile = { type, filename };
            
            // È´ò‰∫ÆÂΩìÂâçÊñá‰ª∂
            document.querySelectorAll('.file-item').forEach(item => {
                item.classList.remove('canvas-file');
            });
            
            // ÊâæÂà∞ÂØπÂ∫îÊñá‰ª∂È°πÂπ∂È´ò‰∫Æ
            const fileItems = document.querySelectorAll('.file-item');
            fileItems.forEach(item => {
                if (item.textContent.includes(filename)) {
                    item.classList.add('canvas-file');
                }
            });
            
            if (type === 'pdf') {
                showSmartPDFViewer(filename);
            } else if (type === 'editor') {
                showSmartDocumentEditor(filename);
            }
            
            // Êõ¥Êñ∞CanvasÁä∂ÊÄÅ
            updateCanvasStatus(`AIÊ≠£Âú®${type === 'pdf' ? 'ÂàÜÊûê' : 'Âçè‰ΩúÁºñËæë'}: ${filename}`, true);
        }
        
        // ÊòæÁ§∫Êô∫ËÉΩPDFÊü•ÁúãÂô®
        function showSmartPDFViewer(filename) {
            switchWorkspace('pdf');
            document.getElementById('canvasIcon').textContent = 'üìÑ';
            document.getElementById('canvasTitleText').textContent = filename;
            document.getElementById('pdfFileName').textContent = filename;
            
            // ÊòæÁ§∫AIÂçè‰ΩúËøáÁ®ã
            showAICollaboration('Ê≠£Âú®Âä†ËΩΩPDF...', 'ÂàÜÊûêÊñáÊ°£ÁªìÊûÑ', 30);
            
            setTimeout(() => {
                const pdfPage = document.getElementById('pdfPage');
                pdfPage.innerHTML = `
                    <div style="width: 100%; height: 500px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border: 2px dashed #dee2e6; display: flex; align-items: center; justify-content: center; flex-direction: column; border-radius: 8px;">
                        <div style="font-size: 48px; margin-bottom: 16px; color: var(--primary-color);">üìÑ</div>
                        <div style="font-size: 18px; font-weight: 500; margin-bottom: 8px;">${filename}</div>
                        <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 16px;">PDFÂÜÖÂÆπÈ¢ÑËßàÂå∫Âüü</div>
                        <div style="background: var(--bg-primary); padding: 12px 20px; border-radius: 6px; border: 1px solid var(--border-color);">
                            <div style="font-size: 12px; color: var(--text-tertiary);">ü§ñ AIÂ∑≤ÂÆåÊàêÂàùÊ≠•ÂàÜÊûê</div>
                        </div>
                    </div>
                `;
                
                hideAICollaboration();
                
                // ÊòæÁ§∫AIÂàÜÊûêÁªìÊûú
                setTimeout(() => {
                    document.getElementById('aiAnnotations').classList.add('show');
                }, 1000);
                
            }, 2000);
        }
        
        // ÊòæÁ§∫Êô∫ËÉΩÊñáÊ°£ÁºñËæëÂô®
        function showSmartDocumentEditor(filename) {
            switchWorkspace('editor');
            document.getElementById('canvasIcon').textContent = 'üìù';
            document.getElementById('canvasTitleText').textContent = filename;
            
            // ÊòæÁ§∫AIÂçè‰ΩúËøáÁ®ã
            showAICollaboration('Ê≠£Âú®ÂáÜÂ§áÁºñËæëÂô®...', 'Âä†ËΩΩÊñáÊ°£Ê®°Êùø', 50);
            
            setTimeout(() => {
                // Âä†ËΩΩÊñáÊ°£Ê®°Êùø
                const templates = {
                    'ÊñΩÂ∑•ÊñπÊ°à.docx': `
                        <h1>ÊñΩÂ∑•ÊñπÊ°à</h1>
                        <div style="background: linear-gradient(135deg, #fff3cd 0%, #fef3c7 100%); border-left: 4px solid var(--warning-color); padding: 12px; margin: 16px 0; border-radius: 4px;">
                            <div style="font-size: 13px; color: var(--warning-color); font-weight: 500;">ü§ñ AIÊô∫ËÉΩÂª∫ËÆÆ</div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Âü∫‰∫éÈ°πÁõÆÁâπÁÇπÔºåÂª∫ËÆÆÊ∑ªÂä†‰ª•‰∏ãÁ´†ËäÇÔºöÂ∑•Á®ãÊ¶ÇÂÜµ„ÄÅÊñΩÂ∑•ÂáÜÂ§á„ÄÅÊñΩÂ∑•Â∑•Ëâ∫„ÄÅË¥®ÈáèÊéßÂà∂„ÄÅÂÆâÂÖ®Êé™ÊñΩ</div>
                        </div>
                        <h2>1. Â∑•Á®ãÊ¶ÇÂÜµ</h2>
                        <p>Êú¨Â∑•Á®ã‰∏∫ÊüêÂ∏ÇÊîøÈÅìË∑ØÊîπÈÄ†È°πÁõÆÔºå‰∏ªË¶ÅÂåÖÊã¨ÈÅìË∑ØÊãìÂÆΩ„ÄÅÊ°•Ê¢ÅÂä†Âõ∫ÂíåÈÖçÂ•óËÆæÊñΩÂª∫ËÆæ„ÄÇ</p>
                        
                        <h2>2. ÊñΩÂ∑•ÂáÜÂ§á</h2>
                        <h3>2.1 ÊùêÊñôÂáÜÂ§á</h3>
                        <ul>
                            <li>Ê∞¥Ê≥•ÔºöÈááÁî®42.5Á∫ßÊôÆÈÄöÁ°ÖÈÖ∏ÁõêÊ∞¥Ê≥•</li>
                            <li>Èí¢Á≠ãÔºöHRB400Á∫ßÈí¢Á≠ã</li>
                            <li>Ê∑∑ÂáùÂúüÔºöC30ÂïÜÂìÅÊ∑∑ÂáùÂúü</li>
                        </ul>
                        
                        <div style="background: #e8f0fe; border: 1px dashed var(--primary-color); padding: 12px; margin: 16px 0; border-radius: 4px;">
                            <div style="font-size: 13px; color: var(--primary-color); font-weight: 500;">üí° AIÂçè‰ΩúÊèêÁ§∫</div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">ËØ¥"Ê∑ªÂä†ÊñΩÂ∑•Â∑•Ëâ∫ËØ¶ÁªÜÊ≠•È™§"ËÆ©AIÂ∏ÆÊÇ®Êâ©Â±ïÂÜÖÂÆπ</div>
                        </div>
                    `,
                    'Ë¥®ÈáèÊ£ÄÊü•Êä•Âëä.docx': `
                        <h1>Ë¥®ÈáèÊ£ÄÊü•Êä•Âëä</h1>
                        <p><strong>Ê£ÄÊü•Êó•ÊúüÔºö</strong> ${new Date().toLocaleDateString()}</p>
                        <p><strong>Ê£ÄÊü•‰∫∫ÂëòÔºö</strong> Â∑•Á®ãÂ∏àÂõ¢Èòü</p>
                        
                        <div style="background: linear-gradient(135deg, #d1fae5 0%, #f0fdf4 100%); border-left: 4px solid var(--success-color); padding: 12px; margin: 16px 0; border-radius: 4px;">
                            <div style="font-size: 13px; color: var(--success-color); font-weight: 500;">‚úÖ AIÊô∫ËÉΩÊ£ÄÊµã</div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Â∑≤Ëá™Âä®ÂàÜÊûêÁõ∏ÂÖ≥ËßÑËåÉË¶ÅÊ±ÇÔºåÂª∫ËÆÆÊåâGB50300-2013Ê†áÂáÜËøõË°åÊ£ÄÊü•</div>
                        </div>
                        
                        <h2>Ê£ÄÊü•È°πÁõÆ</h2>
                        <table style="width: 100%; border-collapse: collapse; margin: 16px 0;">
                            <tr style="background: #f5f5f5;">
                                <th style="border: 1px solid #ddd; padding: 8px;">Ê£ÄÊü•È°πÁõÆ</th>
                                <th style="border: 1px solid #ddd; padding: 8px;">Ê†áÂáÜË¶ÅÊ±Ç</th>
                                <th style="border: 1px solid #ddd; padding: 8px;">ÂÆûÈôÖÊÉÖÂÜµ</th>
                                <th style="border: 1px solid #ddd; padding: 8px;">ÁªìÊûú</th>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">Ê∑∑ÂáùÂúüÂº∫Â∫¶</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">‚â•C30</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">C32</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">‚úÖ ÂêàÊ†º</td>
                            </tr>
                        </table>
                        
                        <div style="background: #e8f0fe; border: 1px dashed var(--primary-color); padding: 12px; margin: 16px 0; border-radius: 4px;">
                            <div style="font-size: 13px; color: var(--primary-color); font-weight: 500;">ü§ñ AIÂèØ‰ª•ÂçèÂä©</div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">ËØ¥"Ê∑ªÂä†Êõ¥Â§öÊ£ÄÊü•È°πÁõÆ"ËÆ©AIÊâ©Â±ïË°®Ê†ºÂÜÖÂÆπ</div>
                        </div>
                    `
                };
                
                const content = templates[filename] || `
                    <h1>${filename.replace('.docx', '')}</h1>
                    <p>ÂºÄÂßãÁºñÂÜôÊÇ®ÁöÑÂ∑•Á®ãÊñáÊ°£...</p>
                    <div style="background: #e8f0fe; border-left: 4px solid var(--primary-color); padding: 12px; margin: 16px 0; border-radius: 4px;">
                        <div style="font-size: 13px; color: var(--primary-color); font-weight: 500;">ü§ñ AIÂ∞±Áª™</div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Âú®Â∑¶‰æßÂØπËØù‰∏≠ÂëäËØâAIÊÇ®ÈúÄË¶Å‰ªÄ‰πàÂÜÖÂÆπÔºåAI‰ºöÁõ¥Êé•Â∏ÆÊÇ®ÁºñËæë</div>
                    </div>
                `;
                
                document.getElementById('editorArea').innerHTML = content;
                hideAICollaboration();
                
                // ÈöèÊú∫ÊòæÁ§∫AIÂª∫ËÆÆ
                setTimeout(() => {
                    if (Math.random() > 0.5) {
                        showAISuggestionBubble();
                    }
                }, 3000);
                
            }, 2000);
        }
        
        // ÊòæÁ§∫AIÂçè‰ΩúËøáÁ®ã
        function showAICollaboration(message, action, progress) {
            aiActive = true;
            const overlay = document.getElementById('aiCollaborationOverlay');
            const messageEl = document.getElementById('aiMessage');
            const actionEl = document.getElementById('aiAction');
            const progressBar = document.getElementById('aiProgressBar');
            
            messageEl.textContent = message;
            actionEl.textContent = action;
            progressBar.style.width = progress + '%';
            
            overlay.classList.add('show');
            
            // Êõ¥Êñ∞CanvasÁä∂ÊÄÅ
            document.getElementById('canvasStatus').classList.add('ai-active');
        }
        
        // ÈöêËóèAIÂçè‰ΩúËøáÁ®ã
        function hideAICollaboration() {
            aiActive = false;
            const overlay = document.getElementById('aiCollaborationOverlay');
            overlay.classList.remove('show');
            
            document.getElementById('canvasStatus').classList.remove('ai-active');
        }
        
        // ÊòæÁ§∫AIÂª∫ËÆÆÊ∞îÊ≥°
        function showAISuggestionBubble() {
            const bubble = document.getElementById('aiSuggestionBubble');
            bubble.style.top = '100px';
            bubble.style.right = '60px';
            bubble.classList.add('show');
            
            // 5ÁßíÂêéËá™Âä®ÈöêËóè
            setTimeout(() => {
                bubble.classList.remove('show');
            }, 8000);
        }
        
        // ÊòæÁ§∫ÈöèÊú∫AIÂª∫ËÆÆ
        function showRandomAISuggestion() {
            const suggestions = [
                'Âª∫ËÆÆÊ∑ªÂä†È£éÈô©ËØÑ‰º∞Á´†ËäÇÔºåÊèêÈ´òÊñπÊ°àÂÆåÊï¥ÊÄß',
                'Ê£ÄÊµãÂà∞ÂèØ‰ª•‰ºòÂåñÁöÑË°®Ê†ºÊ†ºÂºèÔºåÈúÄË¶ÅÊîπËøõÂêóÔºü',
                'Ê†πÊçÆË°å‰∏öÊ†áÂáÜÔºåÂª∫ËÆÆË°•ÂÖÖÂÆâÂÖ®Êé™ÊñΩËØ¥Êòé',
                'ÂèëÁé∞ÂÜÖÂÆπÂèØ‰ª•Êõ¥Âä†ËØ¶ÁªÜÔºåÈúÄË¶ÅAIÂ∏ÆÂä©Êâ©Â±ïÂêóÔºü'
            ];
            
            const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
            const bubble = document.getElementById('aiSuggestionBubble');
            bubble.querySelector('.suggestion-text').textContent = randomSuggestion;
            
            showAISuggestionBubble();
        }
        
        // Êé•ÂèóAIÂª∫ËÆÆ
        function acceptAISuggestion() {
            const bubble = document.getElementById('aiSuggestionBubble');
            const suggestion = bubble.querySelector('.suggestion-text').textContent;
            
            // Ê®°ÊãüAIÂÆûÊñΩÂª∫ËÆÆ
            showAICollaboration('AIÊ≠£Âú®ÂÆûÊñΩÂª∫ËÆÆ...', '‰ºòÂåñÊñáÊ°£ÂÜÖÂÆπ', 70);
            
            setTimeout(() => {
                // Ê∑ªÂä†AIÁîüÊàêÁöÑÂÜÖÂÆπ
                const editorArea = document.getElementById('editorArea');
                const newContent = `
                    <h2>3. È£éÈô©ËØÑ‰º∞‰∏éÈò≤ÊéßÊé™ÊñΩ</h2>
                    <div style="background: linear-gradient(135deg, #d1fae5 0%, #f0fdf4 100%); border-left: 4px solid var(--success-color); padding: 12px; margin: 16px 0; border-radius: 4px;">
                        <div style="font-size: 13px; color: var(--success-color); font-weight: 500;">ü§ñ AIÂ∑≤Ê∑ªÂä†ÂÜÖÂÆπ</div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Ê†πÊçÆÈ°πÁõÆÁâπÁÇπËá™Âä®ÁîüÊàêÈ£éÈô©ËØÑ‰º∞ÂÜÖÂÆπ</div>
                    </div>
                    <h3>3.1 ‰∏ªË¶ÅÈ£éÈô©ËØÜÂà´</h3>
                    <ul>
                        <li>ÊñΩÂ∑•ÂÆâÂÖ®È£éÈô©ÔºöÈ´òÁ©∫‰Ωú‰∏ö„ÄÅÊú∫Ê¢∞Êìç‰ΩúÂÆâÂÖ®</li>
                        <li>Ë¥®ÈáèÈ£éÈô©ÔºöÊùêÊñôË¥®Èáè„ÄÅÊñΩÂ∑•Â∑•Ëâ∫ÊéßÂà∂</li>
                        <li>ËøõÂ∫¶È£éÈô©ÔºöÂ§©Ê∞îÂõ†Á¥†„ÄÅËµÑÊ∫êÈÖçÁΩÆ</li>
                    </ul>
                    <h3>3.2 Èò≤ÊéßÊé™ÊñΩ</h3>
                    <ol>
                        <li>Âª∫Á´ãÂÆåÂñÑÁöÑÂÆâÂÖ®ÁÆ°ÁêÜ‰ΩìÁ≥ª</li>
                        <li>‰∏•Ê†ºÊùêÊñôËøõÂú∫Ê£ÄÈ™åÂà∂Â∫¶</li>
                        <li>Âà∂ÂÆöÂ∫îÊÄ•È¢ÑÊ°àÂíåÂ§ÑÁΩÆÁ®ãÂ∫è</li>
                    </ol>
                `;
                
                editorArea.innerHTML += newContent;
                hideAICollaboration();
                updateCanvasStatus('AIÂ∑≤ÂÆåÂñÑÊñáÊ°£ÂÜÖÂÆπ', true);
                
            }, 2000);
            
            bubble.classList.remove('show');
        }
        
        // ÊãíÁªùAIÂª∫ËÆÆ
        function rejectAISuggestion() {
            document.getElementById('aiSuggestionBubble').classList.remove('show');
        }
        
        // ÂàáÊç¢Â∑•‰ΩúÂå∫
        function switchWorkspace(workspace) {
            document.querySelectorAll('.canvas-workspace').forEach(w => {
                w.classList.remove('active');
            });
            
            if (workspace === 'welcome') {
                document.getElementById('welcomeWorkspace').classList.add('active');
                document.getElementById('canvasIcon').textContent = 'ü§ñ';
                document.getElementById('canvasTitleText').textContent = 'AIÂçè‰ΩúÁîªÂ∏É';
            } else if (workspace === 'pdf') {
                document.getElementById('pdfWorkspace').classList.add('active');
            } else if (workspace === 'editor') {
                document.getElementById('editorWorkspace').classList.add('active');
            }
            
            currentWorkspace = workspace;
        }
        
        // ÂºÄÂßãÊô∫ËÉΩÂ∑•‰ΩúÊµÅ
        function startSmartWorkflow(type) {
            const workflows = {
                'analyze-drawings': () => openInCanvas('pdf', 'Âª∫Á≠ëÂπ≥Èù¢Âõæ.pdf'),
                'generate-plan': () => {
                    showAICollaboration('AIÊ≠£Âú®ÁîüÊàêÊñΩÂ∑•ÊñπÊ°à...', 'ÂàÜÊûêÈ°πÁõÆÈúÄÊ±Ç', 60);
                    setTimeout(() => {
                        openInCanvas('editor', 'ÊñΩÂ∑•ÊñπÊ°à.docx');
                    }, 2000);
                },
                'quality-check': () => openInCanvas('editor', 'Ë¥®ÈáèÊ£ÄÊü•Êä•Âëä.docx'),
                'risk-assessment': () => {
                    createNewDocument();
                    setTimeout(() => {
                        const editorArea = document.getElementById('editorArea');
                        editorArea.innerHTML = `
                            <h1>È°πÁõÆÈ£éÈô©ËØÑ‰º∞Êä•Âëä</h1>
                            <div style="background: linear-gradient(135deg, #fff3cd 0%, #fef3c7 100%); border-left: 4px solid var(--warning-color); padding: 12px; margin: 16px 0; border-radius: 4px;">
                                <div style="font-size: 13px; color: var(--warning-color); font-weight: 500;">ü§ñ AIËá™Âä®ÁîüÊàê</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Âü∫‰∫éÈ°πÁõÆ‰ø°ÊÅØÊô∫ËÉΩÁîüÊàêÈ£éÈô©ËØÑ‰º∞Ê°ÜÊû∂</div>
                            </div>
                            <p>AIÊ≠£Âú®‰∏∫ÊÇ®ÁöÑÈ°πÁõÆÈáèË∫´ÂÆöÂà∂È£éÈô©ËØÑ‰º∞Êä•Âëä...</p>
                        `;
                    }, 500);
                }
            };
            
            if (workflows[type]) {
                workflows[type]();
            }
        }
        
        // ÂºÄÂßãAI PDFÂàÜÊûê
        function startAIPDFAnalysis() {
            showAICollaboration('AIÊ≠£Âú®Ê∑±Â∫¶ÂàÜÊûêÂõæÁ∫∏...', 'ÊèêÂèñÂÖ≥ÈîÆ‰ø°ÊÅØ', 80);
            
            setTimeout(() => {
                hideAICollaboration();
                document.getElementById('aiAnnotations').classList.add('show');
                
                // Êõ¥Êñ∞Ê≥®ÈáäÂÜÖÂÆπ
                const annotations = document.getElementById('aiAnnotations');
                annotations.innerHTML = `
                    <div class="annotation-title">ü§ñ AIÊ∑±Â∫¶ÂàÜÊûê</div>
                    <div class="annotation-item">‚úÖ ÁªìÊûÑÂÆåÊï¥ÊÄßËâØÂ•Ω</div>
                    <div class="annotation-item">üìè ÂÖ≥ÈîÆÂ∞∫ÂØ∏Â∑≤ÊèêÂèñ</div>
                    <div class="annotation-item">‚ö†Ô∏è ÂèëÁé∞2Â§ÑÈúÄË¶ÅÊ≥®ÊÑèÁöÑËäÇÁÇπ</div>
                    <div class="annotation-item">üìã ÊùêÊñôÊ∏ÖÂçïÂ∑≤ÁîüÊàê</div>
                `;
                
                updateCanvasStatus('AIÂàÜÊûêÂÆåÊàê', true);
            }, 3000);
        }
        
        // ÂÖ∂‰ªñÂäüËÉΩ‰øùÊåÅ‰∏çÂèò...
        function updateCanvasStatus(status, aiActive = false) {
            document.getElementById('canvasStatus').textContent = status;
            if (aiActive) {
                document.getElementById('canvasStatus').classList.add('ai-active');
            } else {
                document.getElementById('canvasStatus').classList.remove('ai-active');
            }
        }
        
        function createNewDocument() {
            const docName = prompt('ËØ∑ËæìÂÖ•Êñ∞ÊñáÊ°£ÂêçÁß∞:') || 'Êñ∞Âª∫ÊñáÊ°£';
            openInCanvas('editor', docName + '.docx');
        }
        
        function startAICollaboration() {
            document.getElementById('inputField').value = '‰Ω†Â•ΩAIÔºåËØ∑Â∏ÆÊàëÂºÄÂßã‰∏Ä‰∏™Êñ∞ÁöÑÂ∑•Á®ãÈ°πÁõÆÊñáÊ°£„ÄÇ';
            document.getElementById('inputField').focus();
            updateCanvasStatus('Á≠âÂæÖAIÂìçÂ∫î...', true);
        }
        
        function showAIRecommendations() {
            alert('AIÂª∫ËÆÆÔºö\n1. ÂÆåÂñÑÊñΩÂ∑•ÊñπÊ°àÁöÑÂÆâÂÖ®Êé™ÊñΩÈÉ®ÂàÜ\n2. Ê∑ªÂä†Ë¥®ÈáèÊ£ÄÊü•ÁöÑËØ¶ÁªÜÊµÅÁ®ã\n3. Ë°•ÂÖÖÈ°πÁõÆÈ£éÈô©ËØÑ‰º∞ÂÜÖÂÆπ');
        }
        
        function askAIForHelp() {
            document.getElementById('inputField').value = 'ËØ∑AIÂ∏ÆÊàë‰ºòÂåñÂΩìÂâçÊ≠£Âú®ÁºñËæëÁöÑÊñáÊ°£ÂÜÖÂÆπ„ÄÇ';
            document.getElementById('inputField').focus();
        }
        
        function showAISuggestions() {
            showAISuggestionBubble();
        }
        
        // Â∑•ÂÖ∑Ê†èÂäüËÉΩ
        function formatText(command) {
            document.execCommand(command, false, null);
            document.getElementById('editorArea').focus();
        }
        
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('collapsed');
        }
        
        function clearCanvas() {
            if (confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÂΩìÂâçÁîªÂ∏ÉÂêóÔºü')) {
                switchWorkspace('welcome');
                currentFile = null;
                updateCanvasStatus('Â∞±Áª™');
                
                // Ê∏ÖÈô§Êñá‰ª∂È´ò‰∫Æ
                document.querySelectorAll('.file-item').forEach(item => {
                    item.classList.remove('canvas-file');
                });
                
                // ÈöêËóèAIÊ≥®Èáä
                document.getElementById('aiAnnotations').classList.remove('show');
            }
        }
        
        function saveCanvas() {
            if (currentWorkspace === 'editor') {
                const content = document.getElementById('editorArea').innerHTML;
                console.log('‰øùÂ≠òÊñáÊ°£:', content);
                
                showAICollaboration('AIÊ≠£Âú®‰ºòÂåñ‰øùÂ≠ò...', 'Ê£ÄÊü•ÂÜÖÂÆπÂÆåÊï¥ÊÄß', 90);
                
                setTimeout(() => {
                    hideAICollaboration();
                    updateCanvasStatus('Â∑≤‰øùÂ≠òÂπ∂‰ºòÂåñ', true);
                    
                    setTimeout(() => {
                        updateCanvasStatus(`Ê≠£Âú®ÁºñËæë: ${currentFile?.filename || 'ÊñáÊ°£'}`);
                    }, 3000);
                }, 1500);
            } else {
                alert('ÂΩìÂâçÁîªÂ∏ÉÂÜÖÂÆπÂ∑≤‰øùÂ≠ò');
            }
        }
        
        // PDFÊéßÂà∂ÂäüËÉΩ
        function previousPage() {
            const currentPage = document.getElementById('currentPage');
            const pageNum = parseInt(currentPage.textContent);
            if (pageNum > 1) {
                currentPage.textContent = pageNum - 1;
            }
        }
        
        function nextPage() {
            const currentPage = document.getElementById('currentPage');
            const totalPages = document.getElementById('totalPages');
            const pageNum = parseInt(currentPage.textContent);
            const total = parseInt(totalPages.textContent);
            if (pageNum < total) {
                currentPage.textContent = pageNum + 1;
            }
        }
        
        function zoomIn() {
            console.log('ÊîæÂ§ßPDF');
        }
        
        function zoomOut() {
            console.log('Áº©Â∞èPDF');
        }
        
        function fitToWidth() {
            console.log('ÈÄÇÂêàÂÆΩÂ∫¶');
        }
        
        // Êñ∞Âª∫ÂØπËØù
        function startNewChat() {
            alert('Êñ∞Âª∫ÂØπËØùÂäüËÉΩ - ‰øùÊåÅÂéüÊúâÈÄªËæë');
        }
        
        // ËÆæÁΩÆ
        function openSettings() {
            alert('ËÆæÁΩÆÂäüËÉΩ - ‰øùÊåÅÂéüÊúâÈÄªËæë');
        }
        
        // ÂèëÈÄÅÊ∂àÊÅØ - Â¢ûÂº∫AIÂçè‰ΩúÂäüËÉΩ
        document.getElementById('sendButton').addEventListener('click', function() {
            const inputField = document.getElementById('inputField');
            const message = inputField.value.trim();
            
            if (message) {
                console.log('ÂèëÈÄÅÊ∂àÊÅØ:', message);
                inputField.value = '';
                inputField.classList.add('ai-thinking');
                this.classList.add('ai-processing');
                
                // ÈöêËóèËæìÂÖ•Âª∫ËÆÆ
                document.getElementById('inputSuggestions').classList.remove('show');
                
                // Ê®°ÊãüAIÊô∫ËÉΩÂìçÂ∫îCanvasÊìç‰Ωú
                setTimeout(() => {
                    simulateSmartAICanvasOperation(message);
                    inputField.classList.remove('ai-thinking');
                    this.classList.remove('ai-processing');
                }, 1500);
            }
        });
        
        // Ê®°ÊãüÊô∫ËÉΩAI CanvasÊìç‰Ωú
        function simulateSmartAICanvasOperation(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('Âª∫Á≠ëÂπ≥Èù¢Âõæ') || lowerMessage.includes('ÂõæÁ∫∏') || lowerMessage.includes('ÂàÜÊûê')) {
                showAICollaboration('AIÊ≠£Âú®ÁêÜËß£ÊÇ®ÁöÑÈúÄÊ±Ç...', 'ÂáÜÂ§áÊâìÂºÄÂõæÁ∫∏', 40);
                setTimeout(() => {
                    openInCanvas('pdf', 'Âª∫Á≠ëÂπ≥Èù¢Âõæ.pdf');
                }, 1000);
            } else if (lowerMessage.includes('ÊñΩÂ∑•ÊñπÊ°à') || lowerMessage.includes('ÂàõÂª∫') || lowerMessage.includes('Êñ∞Âª∫')) {
                showAICollaboration('AIÊ≠£Âú®ÁîüÊàêÊñΩÂ∑•ÊñπÊ°à...', 'ÂàÜÊûêÈ°πÁõÆÈúÄÊ±Ç', 60);
                setTimeout(() => {
                    openInCanvas('editor', 'ÊñΩÂ∑•ÊñπÊ°à.docx');
                }, 1500);
            } else if (lowerMessage.includes('ÂÆåÂñÑ') || lowerMessage.includes('‰ºòÂåñ') || lowerMessage.includes('ÊîπËøõ')) {
                if (currentWorkspace === 'editor') {
                    showAICollaboration('AIÊ≠£Âú®ÂàÜÊûêÂÜÖÂÆπ...', '‰ºòÂåñÊñáÊ°£ÁªìÊûÑ', 70);
                    setTimeout(() => {
                        // Ê®°ÊãüAIÊô∫ËÉΩÁºñËæë
                        const editorArea = document.getElementById('editorArea');
                        const currentContent = editorArea.innerHTML;
                        
                        if (currentContent.includes('ÊñΩÂ∑•ÊñπÊ°à')) {
                            editorArea.innerHTML = currentContent + `
                                <div style="background: linear-gradient(135deg, #d1fae5 0%, #f0fdf4 100%); border-left: 4px solid var(--success-color); padding: 12px; margin: 16px 0; border-radius: 4px;">
                                    <div style="font-size: 13px; color: var(--success-color); font-weight: 500;">ü§ñ AIÊô∫ËÉΩ‰ºòÂåñ</div>
                                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Ê†πÊçÆÂ∑•Á®ãËßÑËåÉËá™Âä®Ê∑ªÂä†Áõ∏ÂÖ≥ÂÜÖÂÆπ</div>
                                </div>
                                <h2>4. ÊñΩÂ∑•Ë¥®ÈáèÊéßÂà∂</h2>
                                <h3>4.1 Ë¥®ÈáèÁÆ°ÁêÜ‰ΩìÁ≥ª</h3>
                                <p>Âª∫Á´ã‰∏âÁ∫ßË¥®ÈáèÊ£ÄÊü•Âà∂Â∫¶ÔºöÁè≠ÁªÑËá™Ê£Ä„ÄÅÂ∑•ÈïøÂ§çÊ£Ä„ÄÅË¥®Ê£ÄÂëò‰∏ìÊ£Ä„ÄÇ</p>
                                <h3>4.2 ÂÖ≥ÈîÆÂ∑•Â∫èÊéßÂà∂ÁÇπ</h3>
                                <ul>
                                    <li>Èí¢Á≠ãÁªëÊâéÔºöÈí¢Á≠ãËßÑÊ†º„ÄÅÈó¥Ë∑ù„ÄÅ‰øùÊä§Â±ÇÂéöÂ∫¶</li>
                                    <li>Ê∑∑ÂáùÂúüÊµáÁ≠ëÔºöÈÖçÊØî„ÄÅÊåØÊç£„ÄÅÂÖªÊä§</li>
                                    <li>Ê®°ÊùøÂÆâË£ÖÔºöÂπ≥Êï¥Â∫¶„ÄÅÂûÇÁõ¥Â∫¶„ÄÅÊîØÊíëÁ®≥ÂÆöÊÄß</li>
                                </ul>
                            `;
                        }
                        
                        hideAICollaboration();
                        updateCanvasStatus('AIÂ∑≤Êô∫ËÉΩ‰ºòÂåñÊñáÊ°£ÂÜÖÂÆπ', true);
                        
                        // ÊòæÁ§∫‰ºòÂåñÂÆåÊàêÁöÑÂª∫ËÆÆÊ∞îÊ≥°
                        setTimeout(() => {
                            const bubble = document.getElementById('aiSuggestionBubble');
                            bubble.querySelector('.suggestion-text').textContent = 'ÊñáÊ°£Â∑≤‰ºòÂåñÂÆåÊàêÔºÅËøòÈúÄË¶ÅÊ∑ªÂä†ÂÆâÂÖ®ÁÆ°ÁêÜÁ´†ËäÇÂêóÔºü';
                            showAISuggestionBubble();
                        }, 1000);
                        
                    }, 2000);
                } else {
                    openInCanvas('editor', 'ÊñΩÂ∑•ÊñπÊ°à.docx');
                }
            } else if (lowerMessage.includes('Ë¥®Èáè') || lowerMessage.includes('Ê£ÄÊü•')) {
                showAICollaboration('AIÊ≠£Âú®ÂáÜÂ§áË¥®ÈáèÊ£ÄÊü•Ê®°Êùø...', 'Âä†ËΩΩËßÑËåÉÊ†áÂáÜ', 55);
                setTimeout(() => {
                    openInCanvas('editor', 'Ë¥®ÈáèÊ£ÄÊü•Êä•Âëä.docx');
                }, 1500);
            } else {
                // ÈÄöÁî®AIÂìçÂ∫î
                updateCanvasStatus('AIÊ≠£Âú®ÁêÜËß£ÊÇ®ÁöÑÈúÄÊ±Ç...', true);
                setTimeout(() => {
                    updateCanvasStatus('AIÂ∑≤ÂáÜÂ§áÂ∞±Áª™', false);
                    
                    // ÊòæÁ§∫Êô∫ËÉΩÂª∫ËÆÆ
                    setTimeout(() => {
                        showSmartInputSuggestions([
                            'ÂàÜÊûêÂΩìÂâçÈ°πÁõÆÁöÑÊäÄÊúØË¶ÅÁÇπ', 
                            'ÁîüÊàêÁõ∏ÂÖ≥ÁöÑÂ∑•Á®ãÊñáÊ°£', 
                            'Êü•ÁúãÈ°πÁõÆÁõ∏ÂÖ≥ÂõæÁ∫∏'
                        ]);
                    }, 1000);
                }, 2000);
            }
        }
        
        // ÂõûËΩ¶ÂèëÈÄÅ
        document.getElementById('inputField').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                document.getElementById('sendButton').click();
            }
        });
    </script>
</body>
</html> 